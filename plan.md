这个计划旨在将一个功能完善且安全的“社交恢复钱包”集成到您现有的项目中，并充分利用您已
  有的 shamir.ts 核心功能。

  ---

  总体目标：构建一个支持社交恢复的 Web 钱包


  我们将分步实现以下功能：
   1. 基础钱包: 创建、加密存储、解锁。
   2. 社交恢复: 使用 shamir.ts 分割和恢复助记词。
   3. 核心功能: 显示余额、发送交易、查看历史记录。


  ---

  开发计划 (分阶段进行)

  第一阶段：奠定基础 - 核心依赖与安全存储

  此阶段的目标是搭建钱包所需的技术框架，并实现最关键的安全存储逻辑，但暂不涉及 UI。


   * 任务 1.1：安装核心依赖
       * 我们将安装 ethers.js，这是一个完整、强大且被广泛使用的以太坊钱包实现库。
       * 执行命令: npm install ethers


   * 任务 1.2：创建安全存储模块 (`secureVault.ts`)
       * 在 src/crypto/ 目录下创建一个新文件 secureVault.ts。
       * 这个模块将负责：
           * 接收一个助记词 (mnemonic) 和用户密码。
           * 使用行业标准库 (如 ethers.js 自带的加密功能)，通过密码将助记词加密成一个
             JSON "Vault"。
           * 提供一个解密函数，用密码解密 Vault 以取回助记词。
           * 这个模块将是整个钱包安全性的基石。


   * 任务 1.3：创建钱包管理模块 (`walletManager.ts`)
       * 在 src/crypto/ 目录下创建 walletManager.ts。
       * 该模块将协调 ethers.js 和 secureVault.ts，并管理钱包的生命周期：
           * `createNewWallet(password)`: 生成新助记词，调用 secureVault
             加密，并将加密后的 Vault 存入浏览器的 IndexedDB。
           * `unlockWallet(password)`: 从 IndexedDB 加载加密的
             Vault，用密码解密，并将钱包实例保存在内存中供后续使用。
           * `lockWallet()`: 从内存中清除私钥和助记词，锁定钱包。
           * `getWallet()`: 获取内存中的钱包实例以进行签名等操作。

  第二阶段：UI 实现 - 用户交互界面


  此阶段我们将创建与钱包交互所需的前端 React 组件。


   * 任务 2.1：创建钱包设置入口 (`WalletSetup.tsx`)
       * 创建一个新的组件，作为用户进入钱包功能的入口。
       * 它会检查本地是否已存在加密的 Vault。
           * 如果不存在，显示 "创建新钱包" 和 "使用恢复份额导入" 两个选项。
           * 如果存在，则显示一个输入密码的 "解锁钱包" 界面。


   * 任务 2.2：创建钱包主面板 (`WalletDashboard.tsx`)
       * 创建钱包解锁后看到的主界面。
       * 初期只显示用户的钱包地址和二维码，以及一个醒目的 "锁定" 按钮。


   * 任务 2.3：整合到主应用 (`App.tsx`)
       * 修改 App.tsx 的逻辑，将 WalletSetup.tsx 和 WalletDashboard.tsx
         在合适的时机渲染出来，实现应用状态（锁定/解锁）的切换。

  第三阶段：核心功能 - 实现社交恢复

  这是将您的项目特色与钱包结合的关键一步。


   * 任务 3.1：修改钱包创建流程
       * 在 "创建新钱包" 的流程中，当 walletManager.ts 生成新的助记词后：
           * 不直接展示助记词给用户。
           * 调用您现有的 shamir.ts 的 split 函数，将助记词作为秘密，分割成 N
             份恢复份额。
           * 创建一个新的组件 DisplayShares.tsx，清晰地向用户展示这 N
             份恢复份额，并强调其重要性。


   * 任务 3.2：实现钱包恢复流程
       * 创建一个新的组件 RecoverWallet.tsx。
       * 该组件提供多个输入框，让用户输入足够数量的恢复份额。
       * 点击“恢复”后，调用 shamir.ts 的 combine 函数。
       * 如果成功恢复出原始助记词，则引导用户设置一个新的密码，并调用 walletManager.ts
         来加密和存储新的 Vault。

  第四阶段：完善钱包功能

  在核心框架和特色功能完成后，我们来添加标准钱包的必备功能。


   * 任务 4.1：实现余额查询
       * 在 WalletDashboard.tsx 中，使用 ethers.js 连接到一个以太坊节点 (如 Infura,
         Alchemy 或公共 RPC)，获取并显示钱包的 ETH 余额。


   * 任务 4.2：实现发送功能 (`SendForm.tsx`)
       * 创建一个包含收款地址、金额和 Gas 费选项的表单。
       * 用户提交后，调用 walletManager.ts
         获取内存中的钱包实例来对交易进行签名，然后通过 ethers.js
         将交易发送到区块链网络。


   * 任务 4.3：实现交易历史 (`TransactionHistory.tsx`)
       * 通过 Etherscan API 或类似的区块浏览器服务，获取并展示用户的历史交易列表。

